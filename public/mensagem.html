<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deixe sua mensagem â€“ Minha BebÃª</title>
    <link rel="stylesheet" href="assets/css/mensagem.css" />
</head>

<body>

    <!-- CabeÃ§alho padrÃ£o -->
    <header class="topo-simples">
        <a href="/" class="logo" aria-label="Voltar para a pÃ¡gina inicial">ğŸŒ¸ Minha BebÃª</a>
    </header>

    <!-- Container da mensagem -->
    <div class="mensagem-container">
        <h1>Deixe sua mensagem ğŸ’–</h1>
        <form id="mensagemForm">
            <label for="nome">Seu nome</label>
            <input type="text" id="nome" name="nome" required aria-required="true" autocomplete="name"
                placeholder="Digite seu nome" />

            <label for="mensagem">Mensagem</label>
            <textarea id="mensagem" name="mensagem" rows="9" required aria-required="true"
                placeholder="Escreva sua mensagem aqui..."></textarea>
            <button type="submit" class="cta-button" aria-label="Enviar mensagem">Enviar</button>
        </form>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="assets/js/confetti.js"></script>
    <script>
        document.getElementById('mensagemForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const nome = document.getElementById('nome').value;
            const mensagem = document.getElementById('mensagem').value;

            fetch('http://localhost:3000/mensagem', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ nome, mensagem })
            })
                .then(res => res.json())
                .then(data => {
                    if (data.sucesso) {
                        alert('Mensagem enviada com sucesso!');
                    } else {
                        alert('Erro ao enviar mensagem.');
                    }
                })
                .catch(err => {
                    console.error(err);
                    alert('Erro na conexÃ£o com o servidor.');
                });
        });
    </script>

</body>

</html>